---
title: "Single Sign On (SSO) for Tomcat"
author: Patrick Debois
guid: https://www.jedi.be/blog/2008/10/09/single-sign-on-sso-for-tomcat/
created_at: 2008-10-09 09:14:00.0 +00:00
blog_post: true
categories:
   - Uncategorized
tags:
   - sso
   - tomcat
---
Are customer of mine asked advice to enable single-sign-on in his J2EE application. Currently they have multiple applications running in their own tomcat server. As usual there is no one size fits all.<br /><br /><br /><u><b>Solution 0: Do It Yourself<br /></b></u><br />Security is dangers and only done right by good people . Just kidding....<br />You SHOULD NOT DO THIS ;-) You will not keep up with new authentication schemes, bugs ...<u><b><br /><br />Solution 1: Non-Clustered SSO:<br /></b></u>&nbsp;Deploy all applications within the same Tomcat/ Virtual host<br /><ul><li>Tomcat 4.x: </li><li>Tomcat 5.x </li></ul>(cfr. <a href="http://wiki.jboss.org/wiki/SingleSignOn">http://wiki.jboss.org/wiki/SingleSignOn</a>)<br /><u><b><br /></b></u>Pro: You can use the Tomcat internal mechanism that allows SSO for all applications within it's container<br /><br />Cons: This might not work if these applications share different domains (http://www.one.com, http://www.two.com)<br /><br /><br /><br /><u><b>Solution 2: Clustered SSO:<br /><br /></b></u>This would allow you to do clustering over different domains or different Tomcats. But it seems that Tomcat itself did not implement it, but Jboss extended it .<br /><span class="wikiContent"><pre>&lt;Valve className="org.jboss.web.tomcat.tc5.sso.ClusteredSingleSignOn"&lt;br /&gt;              treeCacheName="jboss.cache:service=TomcatClusteringCache" debug="0 &gt;</pre></span>Related you might want to have a look at session replication, or how to direct the traffic to the correct server:<br /><ul><li>Tomcat 6: http://tomcat.apache.org/tomcat-6.0-doc/cluster-howto.html</li><li>Tomcat 5: http://www.onjava.com/pub/a/onjava/2004/12/15/replication2.html</li><li>http://helpme.morphexchange.com/tomcat6/help/items/chapter_20_clustering</li><li>http://tomcat.apache.org/connectors-doc/ -&gt; mod_jk -&gt; Sticky Ness ( session replication)</li><li>http://tomcat.apache.org/tomcat-6.0-doc/api/org/apache/catalina/ha/authenticator/ClusterSingleSignOn.html<br /><br />It seems work is still going on: "org.apache.catalina.ha.authenticator.ClusterSingleSignOn"</li><li>http://books.google.be/books?id=vJttHyVF0SUC&pg=PA310&amp;lpg=PA310&dq=org.apache.catalina.ha.authenticator.ClusterSingleSignOn&amp;source=web&ots=i_4zsZqRh2&amp;sig=1MaqgULENG-DjCHwSkgdNgcjWuU&hl=nl&amp;sa=X&oi=book_result&amp;resnum=3&amp;ct=result#PPA310,M1</li><li>google of summer code (2006): http://fabien.carrion.free.fr/TomcatCluster.html<br /></li></ul>Pro: Add additional redundancy<br />Cons: complex not really supported in Tomcat itself,not well documented, Clustering is not easy for tomcats in different locations/ISP's.<br /><br /><u><b>Solution 3: Tomcat behind a webproxy <br /></b></u>In this case a web proxy&nbsp; f.i. apache) will handle the authentication and passes remote_user environment variable to the servlet so that it can check the username once authenticated.<br /><br />Pro: Removes the need for clustering of doing your own authentication <br />Cons: users are managed elsewhere, a new critical component (if proxy is down, no site is available), routing traffic over the internet is not adviced: A proxy will be at one location and needs to fetch data from another application<br /><br /><u><b>Solution 4: Tomcat with agents of a dedicated SSO solution <br /></b></u>Every large vendor has started to create it's own SSO solution. In essence it often consists of a dedicated application for authentication which has multiple plugins for authentication schemas and allows you to create sessions and has a slick UI for managing rules and users.<br /><br />Pro: if you are familiar with filters and deploying war files most things should come out of the box.<br />Cons: vendor lock in; well not really but you are installing agents and become dependent on the API provide. So choose wise.<br /><ul><li>http://www.simongbrown.com/blog/2004/11/04/1099588633312.html</li><li>Josso: http://www.josso.org/confluence/display/JOSSO1/JOSSO+-+Java+Open+Single+Sign-On+Project+Home</li><li>Open SSO: http://blogs.sun.com/superpat/entry/opensso_on_tomcat_in_ubuntu</li><li>Novel, JBoss, Oracle, Atlassia, ...<br /> </li></ul>